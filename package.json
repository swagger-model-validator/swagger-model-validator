{
    "name": "swagger-model-validator",
    "version": "0.0.1",
    "licence": "apache 2.0",
    "readme": "# Validate incoming objects against Swagger Models for Node.js\n\n[![Build Status](https://travis-ci.org/wordnik/swagger-node-express.png)](https://travis-ci.org/wordnik/swagger-node-express)\n\nThis is a [Swagger](https://github.com/wordnik/swagger-spec) module for the [Express](http://expressjs.com) web application framework for Node.js.\n\nTry a sample!  The source for a [functional sample](https://github.com/wordnik/swagger-node-express/blob/master/SAMPLE.md) is available on github.\n\n## What's Swagger?\n\nThe goal of Swaggerâ„¢ is to define a standard, language-agnostic interface to REST APIs which allows both humans and computers to discover and understand the capabilities of the service without access to source code, documentation, or through network traffic inspection. When properly defined via Swagger, a consumer can understand and interact with the remote service with a minimal amount of implementation logic. Similar to what interfaces have done for lower-level programming, Swager removes the guesswork in calling the service.\n\n\nCheck out [Swagger-Spec](https://github.com/wordnik/swagger-spec) for additional information about the Swagger project, including additional libraries with support for other languages and more. \n\n\n## Installation\n\nUsing NPM, include the `swagger-node-express` module in your `package.json` dependencies.\n\n```json\n{\n\t...\n\t\"dependencies\": {\n\t\t\"swagger-node-express\": \"~2.0\",\n\t\t...\n\t}\n}\n```\n\n\n## Adding Swagger to an Express Application\n\n```js\n// Load module dependencies.\nvar express = require(\"express\")\n , url = require(\"url\")\n , swagger = require(\"swagger-node-express\");\n\n// Create the application.\nvar app = express();\napp.use(express.json());\napp.use(express.urlencoded());\n\n// Couple the application to the Swagger module.\nswagger.setAppHandler(app);\n```\n\nYou can optionally add a validator function, which is used to filter the swagger json and request operations:\n\n```js\n// This is a sample validator.  It simply says that for _all_ POST, DELETE, PUT  methods, \n// the header api_key OR query param api_key must be equal to the string literal \n// special-key.  All other HTTP ops are A-OK */\n\nswagger.addValidator(\n  function validate(req, path, httpMethod) {\n    //  example, only allow POST for api_key=\"special-key\"\n    if (\"POST\" == httpMethod || \"DELETE\" == httpMethod || \"PUT\" == httpMethod) {\n      var apiKey = req.headers[\"api_key\"];\n      if (!apiKey) {\n        apiKey = url.parse(req.url,true).query[\"api_key\"];\n      }\n      if (\"special-key\" == apiKey) {\n        return true; \n      }\n      return false;\n    }\n    return true;\n  }\n);\n\n```\n\nYou now add models to the swagger context.  Models are described in a JSON format, per the [swagger model specification](https://github.com/wordnik/swagger-core/wiki/Datatypes).  Most folks keep them in a separate file (see [here](https://github.com/wordnik/swagger-node-express/blob/master/Apps/petstore/models.js) for an example), or you can add them as such:\n\n```js\nswagger.addModels(models);\n\n```\n\nNext, add some resources.  Each resource contains a swagger spec as well as the action to execute when called.  The spec contains enough to describe the method, and adding the resource will do the rest.  For example:\n\n\n```js\nvar findById = {\n  'spec': {\n    \"description\" : \"Operations about pets\",\n    \"path\" : \"/pet.{format}/{petId}\",\n    \"notes\" : \"Returns a pet based on ID\",\n    \"summary\" : \"Find pet by ID\",\n    \"method\": \"GET\",\n    \"parameters\" : [swagger.pathParam(\"petId\", \"ID of pet that needs to be fetched\", \"string\")],\n    \"type\" : \"Pet\",\n    \"errorResponses\" : [swagger.errors.invalid('id'), swagger.errors.notFound('pet')],\n    \"nickname\" : \"getPetById\"\n  },\n  'action': function (req,res) {\n    if (!req.params.petId) {\n      throw swagger.errors.invalid('id');\n    }\n    var id = parseInt(req.params.petId);\n    var pet = petData.getPetById(id);\n\n    if (pet) {\n      res.send(JSON.stringify(pet));\n    } else {\n      throw swagger.errors.notFound('pet');\n    }\n  }\n};\n\nswagger.addGet(findById);\n\n```\n\nAdds an API route to express and provides all the necessary information to swagger.\n\nFinally, configure swagger with a `public` URL and version (note, this must be called after all the other swagger API calls):\n\n```js\nswagger.configure(\"http://petstore.swagger.wordnik.com\", \"0.1\");\n```\n\nand the server can be started:\n\n```js\napp.listen(8002);\n```\n\nNow you can open up a [swagger-ui](https://github.com/wordnik/swagger-ui) and browse your API, generate a client with [swagger-codegen](https://github.com/wordnik/swagger-codegen), and be happy.\n\n\n## Additional Configurations\n\n### .{format} suffix removal\n\nIf you don't like the .{format} or .json suffix, you can override this before configuring swagger:\n\n```js\nswagger.configureSwaggerPaths(\"\", \"/api-docs\", \"\");\n```\n\nThat will put the resource listing under `/api-docs`, and ditch the `.{format}` on each of the apis you're adding to.  Make sure to set the paths correctly in your spec configuration though, like such:\n\n```js\n// note the .{format} is removed from the path!\nvar findById = {\n  'spec': {\n    \"description\" : \"Operations about pets\",\n    \"path\" : \"/pet/{petId}\",\n    \"notes\" : \"Returns a pet based on ID\",\n    ...\n```\n\n### Mapping swagger to subpaths\n\nTo add a subpath to the api (i.e. list your REST api under `/api` or `/v1`), you can configure express as follows:\n\n```js\nvar app = express();\nvar subpath = express();\n\napp.use(express.json());\napp.use(express.urlencoded());\napp.use(\"/v1\", subpath);\n\nswagger.setAppHandler(subpath);\n```\n\nNow swagger and all apis configured through it will live under the `/v1` path (i.e. `/v1/api-docs`).\n\n### Allows special headers\n\nIf you want to modify the default headers sent with every swagger-managed method, you can do so as follows:\n\n```js\nswagger.setHeaders = function setHeaders(res) {\n  res.header(\"Access-Control-Allow-Headers\", \"Content-Type, X-API-KEY\");\n  res.header(\"Content-Type\", \"application/json; charset=utf-8\");\n};\n```\nIf you have a special name for an api key (such as `X-API-KEY`, per above), this is where you can inject it.\n\n### Error handling\nAs of 2.1.0, swagger no longer consumes errors.  The preferred way to handle errors\nis to use standard express middelware with an arity of 4 I.E.\n\n```javascript\nvar app = express();\nswagger.setAppHandler(app);\napp.use(function(err, req, res, next){\n  //do something with the error.\n});\n```\n\n### Enabling cors support using cors library\n\nTo enable cors support using cors express npm module (https://npmjs.org/package/cors) add the following to your app.\n\n```js\nvar cors = require('cors');\n\nvar corsOptions = {\n    credentials: true,\n    origin: function(origin,callback) {\n        if(origin===undefined) {\n            callback(null,false);\n        } else {\n            // change wordnik.com to your allowed domain.\n            var match = origin.match(\"^(.*)?.wordnik.com(\\:[0-9]+)?\");\n            var allowed = (match!==null && match.length > 0);\n            callback(null,allowed);\n        }\n    }\n};\n\napp.use(cors(corsOptions));\n\n```\n\n### Configuring the Resource Listing Information\n\nThe Swagger `info` node of the resource listing can be configured using the `configureDeclaration` method:\n\n```js\nswagger.configureDeclaration('pet', {\n\tdescription: 'Operations about Pets',\n\tauthorizations : [\"oauth2\"],\n\tprotocols : [\"http\"],\n\tconsumes: ['application/json'],\n\tproduces: ['application/json']\n});\n```\n\n## License\n\nCopyright 2014 Reverb Technologies, Inc.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at [apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0)\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n",
    "bugs": {
        "url": "https://github.com/atlantishealthcare/swagger-mode-validator/issues"
    },
    "homepage": "https://github.com/atlantishealthcare/swagger-mode-validator",
    "scripts": {
        "test": "nodeunit tests"
    }
}
